{"ast":null,"code":"import _toConsumableArray from\"C:/Users/carmu/Documents/Firebase/crud-firestore/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/carmu/Documents/Firebase/crud-firestore/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/carmu/Documents/Firebase/crud-firestore/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/carmu/Documents/Firebase/crud-firestore/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/carmu/Documents/Firebase/crud-firestore/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{firebase}from'./firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),tareas=_React$useState2[0],setTareas=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),tarea=_React$useState4[0],setTarea=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),modoEdicion=_React$useState6[0],setModoEdicion=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),id=_React$useState8[0],setId=_React$useState8[1];React.useEffect(function(){//funcion para obtenr datos\nvar obtenerDatos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var db,datos,arrayData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;db=firebase.firestore();_context.next=4;return db.collection('tareas').get();case 4:datos=_context.sent;//\narrayData=datos.docs.map(function(doc){return _objectSpread({id:doc.id},doc.data());});console.log(arrayData);setTareas(arrayData);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function obtenerDatos(){return _ref.apply(this,arguments);};}();obtenerDatos();},[]);var ejecutarBtn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var db,nuevaTarea,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(tarea.trim()){_context2.next=4;break;}console.log(\"Esta vacio\");return _context2.abrupt(\"return\");case 4:_context2.prev=4;db=firebase.firestore();nuevaTarea={nombre:tarea,fecha:Date.now()};_context2.next=9;return db.collection(\"tareas\").add(nuevaTarea);case 9:data=_context2.sent;setTareas([].concat(_toConsumableArray(tareas),[_objectSpread(_objectSpread({},nuevaTarea),{},{id:data.id})//resivimos el id de firestore\n]));_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](4);console.log(_context2.t0);case 16:console.log(tarea);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[4,13]]);}));return function ejecutarBtn(_x){return _ref2.apply(this,arguments);};}();//Eliminar\nvar eliminar=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var db,arrayFiltrado;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;db=firebase.firestore();_context3.next=4;return db.collection('tareas').doc(id).delete();case 4:arrayFiltrado=tareas.filter(function(item){return item.id!==id;});setTareas(arrayFiltrado);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function eliminar(_x2){return _ref3.apply(this,arguments);};}();//Edicion\nvar activarEdicion=function activarEdicion(item){setModoEdicion(true);setTarea(item.nombre);setId(item.id);};//Edicion de datos\nvar editar=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var db,arrayEditado;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();if(tarea.trim){_context4.next=4;break;}console.log('vacio');return _context4.abrupt(\"return\");case 4:_context4.prev=4;db=firebase.firestore();_context4.next=8;return db.collection('tareas').doc(id).update({nombre:tarea});case 8:arrayEditado=tareas.map(function(item){return item.id===id?{id:item.id,fecha:item.fecha,nombre:tarea}:item;});setTareas(arrayEditado);setModoEdicion(false);setTarea('');setId('');_context4.next=18;break;case 15:_context4.prev=15;_context4.t0=_context4[\"catch\"](4);console.log(_context4.t0);case 18:case\"end\":return _context4.stop();}}},_callee4,null,[[4,15]]);}));return function editar(_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:tareas.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[item.nombre,/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm float-right\",onClick:function onClick(){return eliminar(item.id);},children:\"ELIMINAR\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning btn-sm float-right mr-2\",onClick:function onClick(){return activarEdicion(item);},children:\"EDITAR\"})]},item.id);})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"h3\",{children:modoEdicion?'Editar Tarea':'Agregar Tarea'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:modoEdicion?editar:ejecutarBtn,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Ingresar Tarea\",className:\"form-control mb-2\",onChange:function onChange(e){return setTarea(e.target.value);},value:tarea}),/*#__PURE__*/_jsx(\"button\",{className:modoEdicion?'btn btn-warning btn-block':'btn btn-dark btn-block',type:\"submit\",children:modoEdicion?'EDITAR':'EJECUTAR'})]})]})]})});}export default App;","map":{"version":3,"sources":["C:/Users/carmu/Documents/Firebase/crud-firestore/src/App.jsx"],"names":["React","firebase","App","useState","tareas","setTareas","tarea","setTarea","modoEdicion","setModoEdicion","id","setId","useEffect","obtenerDatos","db","firestore","collection","get","datos","arrayData","docs","map","doc","data","console","log","ejecutarBtn","e","preventDefault","trim","nuevaTarea","nombre","fecha","Date","now","add","eliminar","delete","arrayFiltrado","filter","item","activarEdicion","editar","update","arrayEditado","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {firebase} from './firebase'\n\nfunction App() {\n\n  const [tareas, setTareas] = React.useState([])\n  const [tarea, setTarea] = React.useState('')\n  const [modoEdicion, setModoEdicion] = React.useState(false)\n  const [id, setId] = React.useState('')\n\n  React.useEffect (() => {\n    //funcion para obtenr datos\n    const obtenerDatos = async () => {\n\n      try {\n\n        const db = firebase.firestore()\n        const datos = await db.collection('tareas').get()\n        //\n        const arrayData = datos.docs.map(doc => ({ id: doc.id, ...doc.data()}))\n\n        console.log(arrayData)\n\n        setTareas(arrayData)\n\n      } catch (error) {\n        console.log(error)\n      }\n\n    }\n    obtenerDatos()\n\n  }, [])\n\n  const ejecutarBtn = async (e) => {\n    e.preventDefault()\n\n    if(!tarea.trim()) {\n      console.log(\"Esta vacio\")\n      return\n    }\n    //Agregar documentos\n    try {\n\n      const db = firebase.firestore()\n      const nuevaTarea = {\n        nombre: tarea,\n        fecha: Date.now()\n      }\n\n      const data = await db.collection(\"tareas\").add(nuevaTarea)\n      setTareas([\n        ...tareas,\n        {...nuevaTarea, id: data.id}//resivimos el id de firestore\n      ])\n\n    } catch (error) {\n      console.log(error)\n    }\n\n    console.log(tarea)\n  }\n\n  //Eliminar\n  const eliminar = async (id) => {\n    try {\n      const db = firebase.firestore()\n      await db.collection('tareas').doc(id).delete()\n\n      const arrayFiltrado = tareas.filter(item => item.id !== id)\n      setTareas(arrayFiltrado)\n\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  //Edicion\n  const activarEdicion = (item) => {\n    setModoEdicion(true)\n    setTarea(item.nombre)\n    setId(item.id)\n  }\n  //Edicion de datos\n  const editar = async (e) => {\n    e.preventDefault()\n    if (!tarea.trim) {\n      console.log('vacio')\n      return\n    }\n\n    try {\n      \n      const db = firebase.firestore()\n      await db.collection('tareas').doc(id).update({\n        nombre: tarea\n      })\n      const arrayEditado = tareas.map(item => (\n        item.id === id ? {id: item.id, fecha: item.fecha, nombre: tarea} : item\n      ))\n      setTareas(arrayEditado)\n      setModoEdicion(false)\n      setTarea('')\n      setId('')\n\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  return (\n    <div className=\"container mt-3\">\n      <div className = \"row\">\n        <div className = \"col-md-6\">\n          <ul className=\"list-group\">\n            {\n              tareas.map(item => (\n                <li className=\"list-group-item\" key={item.id}>\n                  {item.nombre}\n                  <button \n                    className=\"btn btn-danger btn-sm float-right\"\n                    onClick={() => eliminar(item.id)}\n                  >\n                    ELIMINAR\n                  </button>\n                  <button \n                    className=\"btn btn-warning btn-sm float-right mr-2\"\n                    onClick={() => activarEdicion(item)}\n                  >\n                    EDITAR\n                  </button>\n                </li>\n              ))\n            }\n          </ul>\n        </div>\n        <div className = \"col-md-6\">\n         <h3>\n           {\n             modoEdicion ? 'Editar Tarea' : 'Agregar Tarea'\n             \n           }\n         </h3>\n         <form onSubmit={modoEdicion ? editar : ejecutarBtn}>\n          <input \n            type=\"text\" \n            placeholder=\"Ingresar Tarea\"\n            className=\"form-control mb-2\"\n            onChange={e => setTarea(e.target.value)}\n            value={tarea}\n          /> \n\n          <button\n            className={\n              modoEdicion ? 'btn btn-warning btn-block' : 'btn btn-dark btn-block' \n            }\n            type=\"submit\"\n          >\n            {\n              modoEdicion ? 'EDITAR' : 'EJECUTAR'\n            }\n          </button>\n\n         </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}